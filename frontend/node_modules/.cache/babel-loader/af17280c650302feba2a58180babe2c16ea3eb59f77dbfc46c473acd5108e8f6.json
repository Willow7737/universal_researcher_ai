{"ast":null,"code":"import _objectSpread from\"/data/data/com.termux/files/home/universal_researcher_ai_merged/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import axios from'../api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AdminUsers(){const[users,setUsers]=useState([]);const[username,setUsername]=useState('newuser');const[password,setPassword]=useState('pass');const[role,setRole]=useState('user');useEffect(()=>{fetchUsers();},[]);async function fetchUsers(){try{const r=await axios.get('/admin/users',{headers:_objectSpread(_objectSpread({},axios.defaults.headers||{}),{},{Authorization:\"Bearer \".concat(localStorage.getItem('token'))})});setUsers(r.data);}catch(e){console.error(e);}}async function addUser(e){e.preventDefault();try{await axios.post('/admin/users',{username,password,role},{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});fetchUsers();}catch(e){var _e$response,_e$response$data;alert(((_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.detail)||e.message);}}return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Users\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:addUser,className:\"row\",children:[/*#__PURE__*/_jsx(\"input\",{value:username,onChange:e=>setUsername(e.target.value),placeholder:\"username\"}),/*#__PURE__*/_jsx(\"input\",{value:password,onChange:e=>setPassword(e.target.value),placeholder:\"password\"}),/*#__PURE__*/_jsxs(\"select\",{value:role,onChange:e=>setRole(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"user\",children:\"user\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"admin\"}),/*#__PURE__*/_jsx(\"option\",{value:\"service\",children:\"service\"})]}),/*#__PURE__*/_jsx(\"button\",{children:\"Add\"})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"users\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Created\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(u=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:u.id}),/*#__PURE__*/_jsx(\"td\",{children:u.username}),/*#__PURE__*/_jsx(\"td\",{children:u.role}),/*#__PURE__*/_jsx(\"td\",{children:u.created_at})]},u.id))})]})]});}","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","AdminUsers","users","setUsers","username","setUsername","password","setPassword","role","setRole","fetchUsers","r","get","headers","_objectSpread","defaults","Authorization","concat","localStorage","getItem","data","e","console","error","addUser","preventDefault","post","_e$response","_e$response$data","alert","response","detail","message","className","children","onSubmit","value","onChange","target","placeholder","map","u","id","created_at"],"sources":["/data/data/com.termux/files/home/universal_researcher_ai_merged/frontend/src/pages/AdminUsers.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\nimport axios from '../api';\n\nexport default function AdminUsers(){\n  const [users, setUsers] = useState([]);\n  const [username, setUsername] = useState('newuser');\n  const [password, setPassword] = useState('pass');\n  const [role, setRole] = useState('user');\n\n  useEffect(()=>{ fetchUsers(); }, []);\n\n  async function fetchUsers(){\n    try{\n      const r = await axios.get('/admin/users', { headers: {...(axios.defaults.headers || {}), Authorization:`Bearer ${localStorage.getItem('token')}`} });\n      setUsers(r.data);\n    }catch(e){\n      console.error(e);\n    }\n  }\n  async function addUser(e){\n    e.preventDefault();\n    try{\n      await axios.post('/admin/users', { username, password, role }, { headers: { Authorization:`Bearer ${localStorage.getItem('token')}` } });\n      fetchUsers();\n    }catch(e){\n      alert(e.response?.data?.detail || e.message);\n    }\n  }\n\n  return (\n    <div className=\"card\">\n      <h3>Users</h3>\n      <form onSubmit={addUser} className=\"row\">\n        <input value={username} onChange={e=>setUsername(e.target.value)} placeholder=\"username\" />\n        <input value={password} onChange={e=>setPassword(e.target.value)} placeholder=\"password\" />\n        <select value={role} onChange={e=>setRole(e.target.value)}>\n          <option value=\"user\">user</option>\n          <option value=\"admin\">admin</option>\n          <option value=\"service\">service</option>\n        </select>\n        <button>Add</button>\n      </form>\n      <table className=\"users\">\n        <thead><tr><th>ID</th><th>Username</th><th>Role</th><th>Created</th></tr></thead>\n        <tbody>\n          {users.map(u=> <tr key={u.id}><td>{u.id}</td><td>{u.username}</td><td>{u.role}</td><td>{u.created_at}</td></tr>)}\n        </tbody>\n      </table>\n    </div>\n  )\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}